<p-toast></p-toast>

<div class="flex flex-column h-screen surface-200">
  <!-- Toolbar superiore -->
  <p-toolbar class="surface-100 shadow-2">
    <div class="flex align-items-center gap-2">
      <i class="pi pi-music text-2xl text-primary"></i>
      <span class="text-xl font-semibold">Canzoniere</span>
    </div>

    <div class="ml-auto flex gap-2">
      <!-- Pulsante per aprire la modale -->
      <p-button icon="pi pi-plus" label="Aggiungi Canzone" (onClick)="openDialog()"></p-button>

      <!-- ðŸ”½ Pulsante per scaricare il PDF -->
      <p-button
        icon="pi pi-download"
        label="Download PDF"
        severity="success"
        (onClick)="downloadPDF()"
      ></p-button>
    </div>
  </p-toolbar>

  <!-- Area contenuto: foglio A4 -->
  <div class="flex flex-auto justify-content-center align-items-start overflow-auto p-5">
    <div
      class="w-full md:w-7 lg:w-6 p-5 shadow-3 surface-card"
      [style]="{ minHeight: '29.7cm', maxWidth: '21cm' }"
    >
      <div class="flex w-6 p-3 flex-column gap-3">
        <h2 class="m-0 text-2xl capitalize text-center">
          <span class="font-bold">{{ title || 'Titolo della canzone' }}</span> -
          <span class="font-normal font-italic">{{ author || 'Autore' }}</span>
        </h2>
        <div
          [innerHTML]="text || '<p><em>Testo della canzone...</em></p>'"
          style="word-wrap: break-word"
        ></div>
      </div>
    </div>
  </div>

  <!-- Modale per salvataggio -->
  <p-dialog
    header="Aggiungi Canzone"
    [(visible)]="visible"
    [modal]="true"
    [closable]="true"
    [style]="{ width: '30rem' }"
  >
    <div class="flex flex-column gap-3">
      <div class="flex flex-column gap-2">
        <label for="title">Titolo</label>
        <input id="title" pInputText [(ngModel)]="title" class="w-full" />
      </div>

      <div class="flex flex-column gap-2">
        <label for="author">Autore</label>
        <input id="author" pInputText [(ngModel)]="author" class="w-full" />
      </div>

      <div class="flex flex-column gap-2">
        <label for="text">Testo</label>
        <p-editor
          id="text"
          [(ngModel)]="text"
          styleClass="w-full border-round-lg"
          [style]="{ height: '20rem' }"
        ></p-editor>
      </div>

      <div class="flex justify-content-end gap-2 mt-2">
        <p-button label="Annulla" severity="secondary" (onClick)="visible = false" />
        <p-button label="Salva" icon="pi pi-check" (onClick)="saveSong()" />
      </div>
    </div>
  </p-dialog>
</div>
